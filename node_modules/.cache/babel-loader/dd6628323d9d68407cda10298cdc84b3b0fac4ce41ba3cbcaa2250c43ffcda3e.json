{"ast":null,"code":"import React from 'react';\nconst express = require('express');\nconst app = express();\nconst fs = require('fs');\nconst path = require('path');\nconst bodyParser = require('body-parser');\nconst dbPath = path.join(__dirname, 'db.json');\napp.use(bodyParser.json());\n\n// Define the generateUniqueId function on the server side\nconst generateUniqueId = () => {\n  // Implement your logic to generate a unique ID here\n  // For simplicity, we'll use a random number for demonstration purposes\n  return Math.random().toString(36).substring(2);\n};\n\n// API endpoint to get all bots from db.json\napp.get('/api/bots', (req, res) => {\n  fs.readFile(dbPath, 'utf8', (err, data) => {\n    if (err) {\n      res.status(500).json({\n        error: 'Error reading the database file.'\n      });\n    } else {\n      const bots = JSON.parse(data);\n      res.json(bots);\n    }\n  });\n});\n\n// API endpoint to add a bot to db.json\napp.post('/api/bots', (req, res) => {\n  fs.readFile(dbPath, 'utf8', (err, data) => {\n    if (err) {\n      res.status(500).json({\n        error: 'Error reading the database file.'\n      });\n    } else {\n      const bots = JSON.parse(data);\n      const newBot = req.body;\n\n      // Generate a unique ID for the new bot (You can use a UUID library)\n      // For this example, we'll assume you have a function to generate a unique ID: generateUniqueId()\n      newBot.id = generateUniqueId();\n      bots.push(newBot);\n      fs.writeFile(dbPath, JSON.stringify(bots), 'utf8', err => {\n        if (err) {\n          res.status(500).json({\n            error: 'Error writing to the database file.'\n          });\n        } else {\n          res.json(newBot);\n        }\n      });\n    }\n  });\n});\n\n// API endpoint to delete a bot from db.json\napp.delete('/api/bots/:id', (req, res) => {\n  const botId = req.params.id;\n  fs.readFile(dbPath, 'utf8', (err, data) => {\n    if (err) {\n      res.status(500).json({\n        error: 'Error reading the database file.'\n      });\n    } else {\n      const bots = JSON.parse(data);\n      const filteredBots = bots.filter(bot => bot.id !== botId);\n      fs.writeFile(dbPath, JSON.stringify(filteredBots), 'utf8', err => {\n        if (err) {\n          res.status(500).json({\n            error: 'Error writing to the database file.'\n          });\n        } else {\n          res.json({\n            success: true\n          });\n        }\n      });\n    }\n  });\n});\nconst port = 5000;\napp.listen(port, () => {\n  console.log(`Server is running on http://localhost:${port}`);\n});\nexport default Server;","map":{"version":3,"names":["React","express","require","app","fs","path","bodyParser","dbPath","join","__dirname","use","json","generateUniqueId","Math","random","toString","substring","get","req","res","readFile","err","data","status","error","bots","JSON","parse","post","newBot","body","id","push","writeFile","stringify","delete","botId","params","filteredBots","filter","bot","success","port","listen","console","log","Server"],"sources":["/home/dennis/bot/src/components/Server.js"],"sourcesContent":["import React from 'react';\n\nconst express = require('express');\nconst app = express();\nconst fs = require('fs');\nconst path = require('path');\nconst bodyParser = require('body-parser');\n\nconst dbPath = path.join(__dirname, 'db.json');\n\napp.use(bodyParser.json());\n\n// Define the generateUniqueId function on the server side\nconst generateUniqueId = () => {\n  // Implement your logic to generate a unique ID here\n  // For simplicity, we'll use a random number for demonstration purposes\n  return Math.random().toString(36).substring(2);\n};\n\n// API endpoint to get all bots from db.json\napp.get('/api/bots', (req, res) => {\n  fs.readFile(dbPath, 'utf8', (err, data) => {\n    if (err) {\n      res.status(500).json({ error: 'Error reading the database file.' });\n    } else {\n      const bots = JSON.parse(data);\n      res.json(bots);\n    }\n  });\n});\n\n// API endpoint to add a bot to db.json\napp.post('/api/bots', (req, res) => {\n  fs.readFile(dbPath, 'utf8', (err, data) => {\n    if (err) {\n      res.status(500).json({ error: 'Error reading the database file.' });\n    } else {\n      const bots = JSON.parse(data);\n      const newBot = req.body;\n\n      // Generate a unique ID for the new bot (You can use a UUID library)\n      // For this example, we'll assume you have a function to generate a unique ID: generateUniqueId()\n      newBot.id = generateUniqueId();\n\n      bots.push(newBot);\n\n      fs.writeFile(dbPath, JSON.stringify(bots), 'utf8', (err) => {\n        if (err) {\n          res.status(500).json({ error: 'Error writing to the database file.' });\n        } else {\n          res.json(newBot);\n        }\n      });\n    }\n  });\n});\n\n// API endpoint to delete a bot from db.json\napp.delete('/api/bots/:id', (req, res) => {\n  const botId = req.params.id;\n\n  fs.readFile(dbPath, 'utf8', (err, data) => {\n    if (err) {\n      res.status(500).json({ error: 'Error reading the database file.' });\n    } else {\n      const bots = JSON.parse(data);\n      const filteredBots = bots.filter((bot) => bot.id !== botId);\n\n      fs.writeFile(dbPath, JSON.stringify(filteredBots), 'utf8', (err) => {\n        if (err) {\n          res.status(500).json({ error: 'Error writing to the database file.' });\n        } else {\n          res.json({ success: true });\n        }\n      });\n    }\n  });\n});\n\nconst port = 5000;\napp.listen(port, () => {\n  console.log(`Server is running on http://localhost:${port}`);\n});\n\nexport default Server;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}